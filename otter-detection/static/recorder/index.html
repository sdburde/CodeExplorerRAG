<meta charset=UTF-8>
<!-- to suppress Mixed Content warning -->
<meta http-equiv=Content-Security-Policy content=upgrade-insecure-requests>
<title>Video Manager</title>

<!-- Enable Android webapp -->
<meta name=mobile-web-app-capable content=yes>
<link rel="shortcut icon" sizes=512x512 href=../assets/icon.png>

<!-- Enable iOS webapp -->
<meta name=apple-mobile-web-app-capable content=yes>
<link rel="apple-touch-icon" sizes=512x512 href=../assets/icon.png>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

<script src=../assets/mwc.min.js></script>
<script src=script.js type=module></script>
<link rel=stylesheet href=styles.css>

<mwc-drawer hasHeader type=modal>
    <span slot=title>
        <div style="
                margin-top: -0.5em; 
                margin-bottom: -0.5em; 
                display: flex; 
                align-items: center; 
                gap: 12px; 
                height: 2em
            ">
            <img src=../assets/v3_logo.png style="height: 90%">
            <div style="width: 2; height: 100%; background: #0003; "></div>
            <img src=../assets/cag_logo.png style="height: 100%">
        </div>
    </span>
    <div style="display: flex; flex-direction: column; height: 100%">
        <div style="display: flex; flex-direction: column; gap: 8px; padding: 8px 8px 0 8px">
            <mwc-textfield label="Search video" icon=search id=SEARCH_TEXTFIELD outlined></mwc-textfield>
            <div style="display: flex; gap: 8px; ">
                <mwc-textfield outlined id=FILTER_DATE_START type=datetime-local
                    style="flex: 1; min-width: 0"></mwc-textfield>
                <mwc-textfield outlined id=FILTER_DATE_END type=datetime-local
                    style="flex: 1; min-width: 0"></mwc-textfield>
            </div>
        </div>

        <mwc-list activatable id=VIDEO_LIST style="flex: 1; overflow-y: auto;">
            <template id=VIDEO_ITEM_TEMPLATE>
                <mwc-list-item graphic=large twoline>
                    <img slot=graphic loading=lazy
                        onerror="this.src='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='"
                        style="border: 1px solid #0006; width: 110px; height:60px">
                    <span name=title></span>
                    <span slot=secondary></span>
                </mwc-list-item>
            </template>
        </mwc-list>
        <mwc-list>
            <li divider role=separator></li>
            <mwc-list-item graphic=icon twoline noninteractive>
                <mwc-icon slot=graphic>save</mwc-icon>
                <mwc-linear-progress id=DISK_STATUS_BAR style="width: 256px"></mwc-linear-progress>
                <span id=DISK_STATUS_TEXT slot=secondary>No storage</span>
            </mwc-list-item>
            <mwc-list-item graphic=icon onclick="location.href = location.pathname + '../'">
                <mwc-icon slot=graphic>radar</mwc-icon>
                <span style="margin-left: 4px">Live detection</span>
            </mwc-list-item>

        </mwc-list>
    </div>
    <div slot=appContent style="display: flex; flex-direction: column; height: 100%;">
        <mwc-top-app-bar>
            <mwc-icon-button slot=navigationIcon icon=menu></mwc-icon-button>
            <div slot=title><img src=../assets/v3_logo.png style="height: 1.5em; filter: contrast(0) brightness(10);">
            </div>
        </mwc-top-app-bar>
        <div style="
            margin: 0.5rem; 
            display: flex; 
            justify-content: center; 
        ">
            <div style="
                max-width: 1280px; 
                display: flex; 
                flex-direction: column; 
            ">

                <canvas style="border: 1px solid #0006; width: 100%" id=VIDEO_CANVAS></canvas>
                <mwc-slider id=VIDEO_SLIDER discrete min=0 max=1000 value=0
                    style="margin-top: 1rem; padding: 0 8px"></mwc-slider>

                <div style="display: flex; justify-content: space-between;">

                    <div>
                        <mwc-icon-button id=DELETE_BUTTON icon=delete style="color: var(--mdc-theme-primary)">
                        </mwc-icon-button>
                        <mwc-icon-button id=DOWNLOAD_BUTTON icon=download style="color: var(--mdc-theme-primary)">
                        </mwc-icon-button>
                    </div>

                    <div style="display: flex; justify-content: center; gap: 8px; color: var(--mdc-theme-primary)">
                        <mwc-icon-button id=REWIND_BUTTON icon="fast_rewind"></mwc-icon-button>
                        <mwc-icon-button-toggle id=PLAY_BUTTON offIcon="play_arrow" onIcon="pause"
                            on></mwc-icon-button-toggle>
                        <mwc-icon-button id=FORWARD_BUTTON icon="fast_forward"></mwc-icon-button>
                    </div>

                    <div style="color: var(--mdc-theme-secondary)">
                        <mwc-icon-button id=CROP_START_BUTTON icon=start>
                        </mwc-icon-button>
                        <mwc-icon-button id=CROP_END_BUTTON icon=cut>
                        </mwc-icon-button>
                    </div>

                </div>

            </div>
        </div>
    </div>
</mwc-drawer>